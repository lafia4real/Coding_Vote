# 虚函数与多态性

##虚函数与多态1

### 多态性概述

指的是不同的对象对于同样的消息会产生不同的行为。而消息在C++语言中指的就是函数的调用，不同的函数可以具有多种不同的功能，而多态就是允许用一个函数名的调用来实现不同的功能。

**按照实现的时机，多态可以分为两类：**

1. **编译时多态**，指的在程序**编译**过程中决定同名操作与对象的绑定关系，也称静态绑定，典型的技术有函数重载，运算符重载、模板

   **优点：**程序运行的时候函数调用速度快，效率较高

   **缺点：**编程不够灵活

2. **运行时多态**，指的是在程序**运行**过程中动态地确定同名操作与具体对象的绑定关系，也称动态绑定，主要通过使用继承和虚函数来实现

   在编译、连接过程中不确定绑定关系，程序运行之后才确定

   **优点：**编程更加灵活、系统易于拓展

   **缺点：**比静态绑定的函数调用速度慢些

   

#### 虚函数的定义格式

```c++
class 类名
{
	......
	virtual 类型 成员函数名(参数表);
	......
};
```

**虚函数必须存在于类的继承环境中才有意义**



### 实现运行时多态的条件

1. 有虚函数
2. 符合赋值兼容规则
3. 由指针或引用去调用虚函数



##虚函数与多态2

如果将基类的析构函数声明为虚函数是，由该基类所派生的所有派生类的析构函数也都自动成为虚函数。

**专业人员一般都习惯声明虚析构函数**，即使基类并不需要析构函数，也显式地定义一个函数体为空的虚析构函数，**以保证在撤销动态分配空间时能得到正确的处理**



## 虚函数与多态3

1. 包含有纯虚函数的类是抽象类
2. 抽象类不能实例化
3. 抽象类派生出新的类之后，如果派生类给出所有纯虚函数的函数实现，这个派生类就可以定义自己的对象，因而不再是抽象类

​		反之，如果派生类没有给出全部纯虚函数的实现，这时的派生类仍然是一个抽象类



